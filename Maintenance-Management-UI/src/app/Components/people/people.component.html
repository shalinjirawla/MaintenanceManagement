<div class="mt-2">
  <div class="">
    <div>
      <div class="d-flex justify-content-between align-items-center pb-2 px-2">
        <div class="d-flex">
          <div class="dropdown me-2">
            <button
              class="btn btn-sm filterbtn dropdown-toggle"
              type="button"
              id="assetDropdown"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Filters
            </button>
            <ul class="dropdown-menu p-3" aria-labelledby="filterDropdown">
              <li>
                <div>
                  <form #filterForm="ngForm">
                    <div class="form-group row">
                      <div class="col-lg-6 form-group m-0">
                        <label for="username" class="form-label"
                          >Username</label
                        >
                        <input
                          type="text"
                          id="username"
                          name="username"
                          class="form-control"
                          [(ngModel)]="filters.username"
                        />
                      </div>

                      <div class="col-lg-6 form-group m-0">
                        <label for="email" class="form-label">Email</label>
                        <input
                          type="text"
                          class="form-control"
                          [(ngModel)]="filters.email"
                          name="email"
                        />
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-lg-6 form-group m-0">
                        <label for="role" class="form-label">Role</label>
                        <input
                          type="text"
                          id="role"
                          name="role"
                          class="form-control"
                          [(ngModel)]="filters.role"
                        />
                      </div>

                      <div class="col-lg-6 form-group pt-4">
                        <button
                          type="button"
                          class="btn btn-sm btn-primary mt-2"
                          (click)="applyFilters()"
                        >
                          Apply Filters
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </li>
            </ul>
          </div>
        </div>
        <div class="d-flex align-items-center">
          <input
            type="text"
            class="search me-2"
            placeholder="Search"
            style="width: 150px"
            [(ngModel)]="searchTerm"
            (keyup)="searchpeople()"
          />
          <button
            class="btn btn-sm btn-themecolor d-none d-md-inline"
            (click)="openModal()"
          >
            <i class="fa fa-plus fa-xs"></i> New
          </button>
        </div>
      </div>
      <button
        class="btn btn-sm2 btn-danger mb-2 ml-8 font"
        *ngIf="selectedItems.length > 0"
        (click)="deletepeople()"
        style="cursor: pointer"
      >
        <i class="fa fa-trash"></i>&nbsp;Delete Selected &nbsp;
      </button>
      <div
        class="card card-body p-4 mx-2"
        *ngIf="!employee || employee.length === 0"
      >
        <div class="d-flex justify-content-between align-items-center">
          <!-- Work Order Title and Status -->
          <div class="">
            <h4 class="card-title mb-1"></h4>
          </div>
        </div>
        <div class="pt-2 text-center">
          <p class="text-muted h5">No Data Found !</p>
        </div>
        <div class="pt-5 text-center">
          <button
            class="btn btn-themecolor d-none d-md-inline"
            (click)="openModal()"
          >
            Add People
          </button>
          <button
            class="btn btn-sm btn-outline-themecolor d-md-none"
            (click)="openModal()"
          >
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>

      <div *ngIf="!isLoading">
        <div class="table-responsive" *ngIf="employee && employee.length > 0">
          <table class="table table-hover">
            <thead>
              <tr>
                <th class="pl-50">
                  <input
                    type="checkbox"
                    [(ngModel)]="selectAll"
                    (change)="toggleAll()"
                    (change)="updateSelection()"
                  />
                </th>
                <th>Username</th>
                <th>Email</th>
                <th>Role</th>
                <th class="text-center pr-50">Action</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="
                  let item of filteredpeople
                    | paginate
                      : { itemsPerPage: itemsPerPage, currentPage: currentPage }
                "
                style="cursor: pointer"
              >
                <td class="pl-50">
                  <input
                    type="checkbox"
                    [(ngModel)]="item.selected"
                    (change)="updateSelection()"
                    (click)="$event.stopPropagation()"
                  />
                </td>
                <td>{{ item.username }}</td>
                <td>{{ item.email }}</td>
                <td>{{ item.roleName }}</td>
                <!-- <td><i class="fa fa-pen text-success" (click)="updatepeople(item.userID)" style="cursor: pointer;"></i></td> -->
                <td class="text-center pr-50">
                  <button
                    class="btn btn-sm2 btn-primary me-1"
                    (click)="Viewpeople(item)"
                  >
                    <i class="fa fa-eye"></i>
                  </button>
                  <button
                    class="btn btn-sm2 btn-success me-1"
                    (click)="updatepeople(item.userID)"
                  >
                    <i class="fa fa-pen"></i>
                  </button>
                  <button
                    class="btn btn-sm2 btn-danger me-1"
                    *ngIf="item.userID != 1"
                    (click)="deletepeople(item.userID)"
                  >
                    <i class="fa fa-trash"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          <pagination-controls
            (pageChange)="pageChanged($event)"
            [maxSize]="5"
            [directionLinks]="true"
            [autoHide]="true"
          ></pagination-controls>
        </div>
      </div>
    </div>
  </div>

  <app-peoplemodel
    [item]="selectedItem"
    (close)="closeModal()"
    *ngIf="isModalOpen"
  >
  </app-peoplemodel>
  <app-peopleviewmodel
    [item]="selectedItem"
    (close)="closeModal()"
    *ngIf="isviewModalOpen"
  >
  </app-peopleviewmodel>
</div>
<div class="full-screen-loader" *ngIf="isLoading">
  <div class="spinner-border text-dark" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>
